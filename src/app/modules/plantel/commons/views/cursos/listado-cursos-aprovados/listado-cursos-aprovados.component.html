<!-- Tabla de cursos solicitados -->
<div *ngIf="!mostrarFormulario" class="container mx-auto p-4">
  <p class="font-bold text-xl text-slate-500 mb-2">Cursos solicitados</p>

  <div class="mb-4">
    <h2 class="font-semibold text-md mb-2">Filtrar Estatus</h2>
    <div class="flex space-x-2">
      <button
        class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
        (click)="filtrarCursos('validados')"
      >
        <i class="fas fa-check-circle mr-1"></i> Validados
      </button>
      <button
        class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
        (click)="filtrarCursos('no-validados')"
      >
        <i class="fas fa-times-circle mr-1"></i> No validados
      </button>
      <button
        class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
        (click)="filtrarCursos('todos')"
      >
        <i class="fas fa-list mr-1"></i> Todos
      </button>
      <button
        class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
        (click)="cargarCursosByIdPlantel()"
      >
        <i class="fas fa-repeat mr-1"></i> Recargar
      </button>
    </div>
  </div>

  <div
    class="bg-white rounded-lg border border-gray-300 p-4 w-full max-w-screen-xl"
  >
    <table class="min-w-full table-auto">
      <thead>
        <tr>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">ID</th>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">AREA</th>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            ESPECIALIDAD
          </th>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            NOMBRE DEL CURSO
          </th>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            FECHA SOLICITADO
          </th>
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            Estatus
          </th>
          <!-- <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            Docente
          </th> -->
          <th class="px-4 py-2 text-left text-[#44509D] font-semibold">
            ACCIONES
          </th>
        </tr>
      </thead>   
      <tbody>
        <tr *ngFor="let modulo of cursosFiltrados">
          <td class="px-2 py-1 text-sm">{{ modulo.plantel_curso_id }}</td>
          <td class="px-2 py-1 text-sm">{{ modulo.area_nombre }}</td>
          <td class="px-2 py-1 text-sm">{{ modulo.especialidad_nombre }}</td>
          <td class="px-2 py-1 text-sm">{{ modulo.curso_nombre }}</td>
          <td class="px-2 py-1 text-sm">
            {{ modulo.created_at | date : "EEEE, d 'de' MMMM 'de' y" }}
          </td>

          <!-- Estado del módulo en otro td -->
          <td
            class="px-2 py-1 text-sm font-medium"
            [ngClass]="{
              'bg-green-100': modulo.estatus_id == 8,
              'bg-red-100': modulo.estatus_id == 9,
              'bg-yellow-100': modulo.estatus_id == 10
            }"
          >
            <span *ngIf="modulo.estatus_id == 8" class="text-black">
              <i class="fas fa-check-circle text-green-500 mr-1"></i> Aceptado
            </span>
            <span *ngIf="modulo.estatus_id == 9" class="text-black">
              <i class="fas fa-times-circle text-red-500 mr-1"></i> Rechazado
            </span>
            <span *ngIf="modulo.estatus_id == 10" class="text-black">
              <i class="fas fa-hourglass-half text-yellow-500 mr-1"></i>
              Pendiente
            </span>
          </td>
          
          <td class="px-2 py-1 text-sm relative">
            <div class="group relative">
              <button
                type="button"
                (click)="eliminarSolicitudCurso(modulo.plantel_curso_id)"
                class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
              >
                <i class="fas fa-trash-alt mr-1"></i> Cancelar Solicitud
              </button>
            </div>

            <button
              class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
              (click)="openModal(modulo.plantel_curso_id)"
            >
              <!-- (click)="verDetalles(modulo.id)" -->
              <i class="fas fa-info-circle mr-1"></i> Ver Detalles
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="isLoading" class="text-center py-4">
  <p>Cargando cursos...</p>
</div>
  <div *ngIf="mostrarFormulario" class="container mx-auto p-6">
    <button
      class="px-4 py-2 bg-white border border-gray-300 rounded-[20px] shadow-md text-gray-700 font-semibold transition duration-200 hover:border-purple-600 hover:text-purple-600 hover:bg-purple-100"
      (click)="openModal(modulo.plantel_curso_id)"
    >
    Atras
      <!-- <i class="fas fa-info-circle mr-1"></i> Atras -->
    </button>
  
    <!-- Detalles del Curso -->
    <div class="bg-white rounded-lg border border-gray-300 p-4 w-full max-w-screen-xl">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">
        Detalles del Curso:
        <input
          type="text"
          [(ngModel)]="curso.nombre"
          class="border rounded p-1"
        />
      </h3>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <p>
            <strong>Área:</strong>
            <input
              type="text"
              [(ngModel)]="curso.area_nombre"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Especialidad:</strong>
            <input
              type="text"
              [(ngModel)]="curso.especialidad_nombre"
              class="border rounded p-1"
            />
          </p>
        </div>


        <div>
          <p>
            <strong>Fecha de Inicio:</strong>
            <input
              type="text"
              [value]="curso.fecha_inicio | date:'yyyy-MM-dd'"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Fecha de Finalización:</strong>
            <input
              type="text"
              [value]="curso.fecha_fin | date:'yyyy-MM-dd'"
              class="border rounded p-1"
            />
          </p>
        </div>
        
        

        <div>
          <p>
            <strong>Cupo Máximo:</strong>
            <input
              type="number"
              [(ngModel)]="curso.cupo_maximo"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Requisitos Extra:</strong>
            <textarea
              [(ngModel)]="curso.requisitos_extra"
              class="border rounded p-1"
            ></textarea>
          </p>
        </div>
        <div>
          <p>
            <strong>Sector Atendido:</strong>
            <input
              type="text"
              [(ngModel)]="curso.sector_atendido"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Rango de Edad:</strong>
            <input
              type="text"
              [(ngModel)]="curso.rango_edad"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Tipo de Beca:</strong>
            <input
              type="text"
              [(ngModel)]="curso.tipo_beca"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Tipo de Curso:</strong>
            <input
              type="text"
              [(ngModel)]="curso.tipo_curso"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Número de Convenio:</strong>
            <input
              type="text"
              [(ngModel)]="curso.convenio_numero"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Cruzada Contra el Hambre:</strong>
            <input
              type="text"
              [(ngModel)]="curso.cruzada_contra_hambre"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Tipo de Cuota:</strong>
            <input
              type="text"
              [(ngModel)]="curso.cuota_tipo"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Monto de Cuota:</strong>
            <input
              type="number"
              [(ngModel)]="curso.cuota_monto"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Pagar al Final:</strong>
            <input type="checkbox" [(ngModel)]="curso.pagar_final" />
          </p>
        </div>
        <div>
          <p>
            <strong>Participantes:</strong>
            <input
              type="number"
              [(ngModel)]="curso.participantes"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Cantidad de Instructores:</strong>
            <input
              type="number"
              [(ngModel)]="curso.cant_instructores"
              class="border rounded p-1"
            />
          </p>
        </div>
      </div>
  
    <!-- Información del Plantel -->
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Información del Plantel</h3>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <p>
            <strong>Calle:</strong>
            <input
              type="text"
              [(ngModel)]="curso.plantel.calle"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Localidad:</strong>
            <input
              type="text"
              [(ngModel)]="curso.plantel.localidad"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Municipio:</strong>
            <input
              type="text"
              [(ngModel)]="curso.plantel.municipio"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Número Interior:</strong>
            <input
              type="text"
              [(ngModel)]="curso.plantel.num_interior"
              class="border rounded p-1"
            />
          </p>
        </div>
        <div>
          <p>
            <strong>Número Exterior:</strong>
            <input
              type="text"
              [(ngModel)]="curso.plantel.num_exterior"
              class="border rounded p-1"
            />
          </p>
        </div>
      </div>
  
    <!-- Información del Horario -->
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Horario del Curso</h3>
      <table class="min-w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200">
            <th class="border border-gray-300 p-2">Día</th>
            <th class="border border-gray-300 p-2">Inicio</th>
            <th class="border border-gray-300 p-2">Fin</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Lunes:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.lunes_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.lunes_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Martes:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.martes_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.martes_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Miércoles:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.miercoles_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.miercoles_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Jueves:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.jueves_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.jueves_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Viernes:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.viernes_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.viernes_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Sábado:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.sabado_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.sabado_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
          <tr>
            <td class="border border-gray-300 p-2"><strong>Domingo:</strong></td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.domingo_inicio"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="time"
                [(ngModel)]="curso.horario.domingo_fin"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
        </tbody>
      </table>
  
    <!-- Información de los Instructores -->
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Información de los Instructores</h3>
      <table class="min-w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200">
            <th class="border border-gray-300 p-2">Nombre</th>
            <th class="border border-gray-300 p-2">Apellidos</th>
            <th class="border border-gray-300 p-2">Email</th>
            <th class="border border-gray-300 p-2">Teléfono</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let docente of docentes">
            <td class="border border-gray-300 p-2">
              <input type="text" [(ngModel)]="docente.nombre" class="border rounded p-1 w-full" />
            </td>
            <td class="border border-gray-300 p-2">
              <input type="text" [(ngModel)]="docente.docente_apellidos" class="border rounded p-1 w-full" />
            </td>
            <td class="border border-gray-300 p-2">
              <input type="email" [(ngModel)]="docente.email" class="border rounded p-1 w-full" />
            </td>
            <td class="border border-gray-300 p-2">
              <input type="tel" [(ngModel)]="docente.telefono" class="border rounded p-1 w-full" />
            </td>
          </tr>
        </tbody>
      </table>
    <!-- </div> -->
  
    <!-- Información de los Alumnos -->
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Información de los Alumnos</h3>
      <table class="min-w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200">
            <th class="border border-gray-300 p-2">Nombre</th>
            <th class="border border-gray-300 p-2">Apellidos</th>
            <th class="border border-gray-300 p-2">Email</th>
            <th class="border border-gray-300 p-2">Teléfono</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let alumno of alumnos">
            <td class="border border-gray-300 p-2">
              <input
                type="text"
                [(ngModel)]="alumno.nombre"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="text"
                [(ngModel)]="alumno.apellidos"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="email"
                [(ngModel)]="alumno.email"
                class="border rounded p-1 w-full"
              />
            </td>
            <td class="border border-gray-300 p-2">
              <input
                type="tel"
                [(ngModel)]="alumno.telefono"
                class="border rounded p-1 w-full"
              />
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- Botón de Guardar Cambios -->
    <button (click)="guardarCambios()" class="mt-4 bg-blue-500 text-white py-2 px-4 rounded">
      Guardar Cambios
    </button>
  </div>
  



